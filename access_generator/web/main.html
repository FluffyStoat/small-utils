<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Access generator</title>

    <link rel="stylesheet" href="styles.css">

    <!-- Include eel.js - note this file doesn't exist in the 'web' directory -->
    <script type="text/javascript" src="/eel.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", () => {
            eel.get_class_list()(class_list => {

                const operations = ['create', 'read', 'update', 'delete'];

                class_list.forEach(className => {
                    let rows = document.getElementById("rows")
                    let row = document.createElement("tr")

                    let name = document.createElement("td")
                    name.innerHTML = createCheckBox(className, className, className)
                    row.append(name)

                    operations.forEach(op => {
                        let operation = document.createElement("td")
                        operation.innerHTML = createCheckBox(className + "" + op, className, op)
                        row.append(operation)
                    })

                    rows.append(row)
                });

                // document.getElementById("data_container").innerHTML = class_list
                //
                // let rows = document.getElementById("rows")
                //
                // for (let row = 0; row <5; row++) {
                //     let tr = document.createElement("tr")
                //     for (let col = 0; col < 5; col++) {
                //         let id = row + "" + col
                //         let td = document.createElement("td")
                //         td.innerHTML =
                //             `<div class="checkbox">
                //                 <input class="custom-checkbox CustomClass" type="checkbox"
                //                     id="cls${id}" name="cls${id}" value="class">
                //                 <label for="cls${id}">CustomClass${id}</label>
                //             </div>`
                //         tr.append(td)
                //     }
                //     rows.append(tr)
                // }
            })
        })

        function createCheckBox(id, cls, name) {
            return `<div class="checkbox">
                        <input class="custom-checkbox ${cls}" type="checkbox"
                            id="${id}" name="${id}" value="class">
                        <label for="${id}">${name}</label>
                    </div>`
        }

        function generate() {
            const input_data = document.getElementsByClassName("CustomClass");

            const data = [];
            Array.prototype.forEach.call(input_data, function(el) {
                if (el.checked) {
                    data.push(el.id);
                }
            });

            eel.generate(data)(callBack);
        }

        function callBack(result) {
            document.getElementById("result_container").innerHTML = result;
        }

        jQuery('#btn_generate').on('click', function() {
            generate();
        });
    </script>
</head>
<body>
    <p><b>Please, select classes for property generation:</b></p><br/>
    <div id="data_container">
        <!--    Container    -->
    </div>
    <br/>
    <table id="rows">
      <!--    Class rows    -->
    </table>
    <br/>
    <button id="btn_generate" type="button" onclick="generate()">Сгенерировать</button>
    <br/>
    <div id="result_container">
        <!--    Container    -->
    </div>
</body>
</html>